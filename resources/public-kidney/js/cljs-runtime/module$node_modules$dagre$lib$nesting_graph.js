shadow$provide.module$node_modules$dagre$lib$nesting_graph=function(global,require,module,exports){function dfs$jscomp$0(g,root,nodeSep,weight,height,depths,v){var children=g.children(v);if(children.length){var top=util.addBorderNode(g,"_bt"),bottom=util.addBorderNode(g,"_bb"),label=g.node(v);g.setParent(top,v);label.borderTop=top;g.setParent(bottom,v);label.borderBottom=bottom;_.forEach(children,function(child){dfs$jscomp$0(g,root,nodeSep,weight,height,depths,child);var childNode=g.node(child),childTop=
childNode.borderTop?childNode.borderTop:child;child=childNode.borderBottom?childNode.borderBottom:child;childNode=childNode.borderTop?weight:2*weight;var minlen=childTop!==child?1:height-depths[v]+1;g.setEdge(top,childTop,{weight:childNode,minlen,nestingEdge:!0});g.setEdge(child,bottom,{weight:childNode,minlen,nestingEdge:!0})});g.parent(v)||g.setEdge(root,top,{weight:0,minlen:height+depths[v]})}else v!==root&&g.setEdge(root,v,{weight:0,minlen:nodeSep})}function treeDepths(g){function dfs(v,depth){var children=
g.children(v);children&&children.length&&_.forEach(children,function(child){dfs(child,depth+1)});depths[v]=depth}var depths={};_.forEach(g.children(),function(v){dfs(v,1)});return depths}function sumWeights(g){return _.reduce(g.edges(),function(acc,e){return acc+g.edge(e).weight},0)}var _=require("module$node_modules$dagre$lib$lodash"),util=require("module$node_modules$dagre$lib$util");module.exports={run:function(g){var root=util.addDummyNode(g,"root",{},"_root"),depths=treeDepths(g),height=_.max(_.values(depths))-
1,nodeSep=2*height+1;g.graph().nestingRoot=root;_.forEach(g.edges(),function(e){g.edge(e).minlen*=nodeSep});var weight=sumWeights(g)+1;_.forEach(g.children(),function(child){dfs$jscomp$0(g,root,nodeSep,weight,height,depths,child)});g.graph().nodeRankFactor=nodeSep},cleanup:function(g){var graphLabel=g.graph();g.removeNode(graphLabel.nestingRoot);delete graphLabel.nestingRoot;_.forEach(g.edges(),function(e){g.edge(e).nestingEdge&&g.removeEdge(e)})}}}
//# sourceMappingURL=module$node_modules$dagre$lib$nesting_graph.js.map
