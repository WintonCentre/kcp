{"version":3,"sources":["transplants/print_fills.cljs"],"mappings":";AAYA,yCAAA,zCAAMA,0FAAgBC,GAAGC,GAAGC;AAA5B,AACE,IAAMC,OAAK,6CAAA,iCAAA,9EAACC;IACNC,OAAK,OAAA,NAAiBL;IACtBM,OAAK,CAAQ,eAAA,dAAgB,MAAA,LAASN,oBAAS,OAAA,NAAiBC;IAChEM,OAAK,CAAQ,gBAAA,fAAgB,MAAA,LAASN,qBAAU,OAAA,NAAiBC;IACjEM,OAAK,MAAA,LAASN;AAJpB,AAKE,yDAAA,lDAACO,qIAAa,CAACN,qCAAAA,2CAAAA,RAAKE,uBAAAA,OAAM,CAACF,qCAAAA,2CAAAA,RAAKG,uBAAAA,OAAM,CAACH,qCAAAA,2CAAAA,RAAKI,uBAAAA,OAAM,CAACJ,qCAAAA,2CAAAA,RAAKK,uBAAAA;;AAE5D,qCAAA,rCAAME,kFAAYC,EAAEC,EAAEC;AAAtB,AACE,yDAAA,lDAACJ,qIAAa,uCAAA,vCAACV,2CAAiBY,EAAEC,GAAG,yCAAA,MAAA,/CAACb,uCAAec;;AAEvD,yCAAA,zCAAMC,0FAAgBC;AAAtB,AACE,yDAAA,mFAAA,uDAAA,5LAACN,8KAAsDM;;AAEzD,wCAAA,xCAAMC,wFAAeL,EAAEC,EAAEC;AAAzB,AACE,OAACC,uCAAe,AAACJ,mCAAWC,EAAEC,EAAEC;;AAElC,kCAAA,lCAAMI,4EAASC;AAAf,AACE,OAACC,8CAAMH,sCAAcE;;AAEvB,kCAAA,lCAAME,4EAASC;AAAf,AACE,OAACF,8CAAMH,sCAAc,AAACM,mDAAQ,AAACC,oBAASF;;AAK1C,oCAAA,wCAAA,4DAAA,yEAAA,uDAAA,6DAAA,0DAAA,uDAAA,sDAAA,qDAAA,jiBAAKG,2pBAEc,gCAAA,hCAACJ,kOACR,gCAAA,hCAACA,2CACH,gCAAA,hCAACA,vLACE,gCAAA,mFAAA,IAAA,MAAA,7HAACH,wTACC,gCAAA,mFAAA,KAAA,KAAA,7HAACA,nWACN,gCAAA,hCAACG,wTACF,gCAAA,hCAACA,1ZACG,AAACA,gCAAQK,+UACZ,gCAAA,hCAACL","names":["transplants.print-fills/encode-triplet","e1","e2","e3","keys","cljs.core.into","enc1","enc2","enc3","enc4","clojure.string.join","transplants.print-fills/encode-rgb","r","g","b","transplants.print-fills/generate-pixel","encoded-color","transplants.print-fills/fill-data-url","transplants.print-fills/rgb-url","rgb","cljs.core.apply","transplants.print-fills/hex-url","hex","cljs.core.js__GT_clj","goog.color/hexToRgb","transplants.print-fills/data-urls","transplants.rgb/theme"],"sourcesContent":["(ns transplants.print-fills\n  (:require [clojure.string :as string]\n            [transplants.rgb :as rgb]\n            [goog.color :as col :refer [hexToRgb]]))\n\n;;;\n;; Most browsers do not print background colours without the user setting a preference to do so.\n;; We can paint divs with a background image, but we need to generate them algorithimcally.\n;; Let's have a go at making dataURLs to paint backgrounds...\n;;\n;; See http://jsfiddle.net/LPxrT/\n;;\n(defn encode-triplet [e1 e2 e3]\n  (let [keys (into [] \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\")\n        enc1 (bit-shift-right e1 2)\n        enc2 (bit-or (bit-shift-left (bit-and e1 3) 4) (bit-shift-right e2 4))\n        enc3 (bit-or (bit-shift-left (bit-and e2 15) 2) (bit-shift-right e3 6))\n        enc4 (bit-and e3 63)]\n    (string/join [(keys enc1) (keys enc2) (keys enc3) (keys enc4)])))\n\n(defn encode-rgb [r g b]\n  (string/join [(encode-triplet 0 r g) (encode-triplet b 255 255)]))\n\n(defn generate-pixel [encoded-color]\n  (string/join [\"data:image/gif;base64,R0lGODlhAQABAPAA\" encoded-color \"/yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\"]))\n\n(defn fill-data-url [r g b]\n  (generate-pixel (encode-rgb r g b)))\n\n(defn rgb-url [rgb]\n  (apply fill-data-url rgb))\n\n(defn hex-url [hex] \n  (apply fill-data-url (js->clj (hexToRgb hex))))\n\n;;\n;; generate data-urls for the colours we use which should appear in printable background fills\n;;\n(def data-urls\n\n  {:vis-background (hex-url \"#cccccc\")\n   :waiting (hex-url \"#4866CB\")\n   :graft (hex-url \"#0491d8\")\n   :survival (rgb-url [0, 151, 156])\n   :usefulinfo (rgb-url [12, 40, 44])\n   :white (hex-url \"#ffffff\")\n   :info (hex-url \"#9C9CFF\")\n   :selected (hex-url rgb/theme)\n   :boxed (hex-url \"#dfe4df\")}\n  ;; => {:vis-background \"data:image/gif;base64,R0lGODlhAQABAPAAAMzMzP///yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\",\n  ;;     :waiting \"data:image/gif;base64,R0lGODlhAQABAPAAAEhmy////yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\",\n  ;;     :graft \"data:image/gif;base64,R0lGODlhAQABAPAAAASR2P///yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\",\n  ;;     :survival \"data:image/gif;base64,R0lGODlhAQABAPAAAACXnP///yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\",\n  ;;     :usefulinfo \"data:image/gif;base64,R0lGODlhAQABAPAAAAwoLP///yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\",\n  ;;     :white \"data:image/gif;base64,R0lGODlhAQABAPAAAP///////yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\",\n  ;;     :info \"data:image/gif;base64,R0lGODlhAQABAPAAAJyc/////yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\",\n  ;;     :selected \"data:image/gif;base64,R0lGODlhAQABAPAAAIiZiP///yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\"}\n\n  )\n\n"]}